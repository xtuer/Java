## 创建 Bean

使用 lombok 编译时自动生成 Getter，Setter，在 Getter，Setter 很多时尤为重要，能够使得代码非常简洁，例如

```java
package com.xtuer.bean;

import lombok.Getter;
import lombok.Setter;

@Getter
@Setter
public class Demo {
    private int id;
    private String info;

    public Demo() {
    }

    public Demo(int id, String info) {
        this.id = id;
        this.info = info;
    }
}
```

使用方法参考 <http://qtdebug.com/java-lombok/>

如果需要把 Form 表单提交的数据映射为 Bean 的对象，则这个 Bean 的基本数据类型的成员，例如 int，float 等必须定义为它们的包装类 Integer，Float，Boolean 等，这样方便使用非 null 进行判断参数是否有传过来。

## REST 风格的 URL

RESTful 风格的 URL 格式，变量名以 `REST_` 开头，URL 以 `/rest` 开头，资源都用 `复数` 形式方便式统一管理 URL。例如下面对资源 topic 和 question 访问的 URL

```java
String REST_TOPICS         = "/rest/topics";
String REST_TOPICS_WITH_ID = "/rest/topics/{topicId}";
String REST_QUESTIONS      = "/rest/topics/{topicId}/questions"; // topic 下的 question
```

> 使用 REST 的 URL，同一个 URL 可以对应 4 种操作，可以节省 URL，而且意图明确。

## REST 请求的响应数据

REST 请求的响应数据必须是 JSON 格式，服务器端使用类 Result 进行包装，统一返回数据的格式，客户端就能方便的知道请求是否成功。

Controller 中返回响应数据构造的 Result 对象即可，SpringMVC 会使用 FastJson 自动把对象转换为 JSON 格式的数据，如 Controller 中:

```java
@GetMapping(UriView.URI_DEMO_MYBATIS)
@ResponseBody
public Result<Demo> queryDemoFromDatabase(@PathVariable int id) {
    return Result.ok("", demoMapper.findDemoById(id));
}
```

响应的 JSON 数据格式为:

```json
{
    "data": {
        "id": 1,
        "info": "Biao"
    },
    "message": "",
    "success": true
}
```

* **success** 在成功时为 true，失败时为 false
* **message** 为请求结果的描述信息，例如失败的原因
* **data** 为请求的数据

> Result 对象的构造参考 `com.xtuer.bean.Result` 的源码。

## REST 请求的执行

* `获取数据` 使用 GET，前端调用 `$.rest.get()`，后端使用 `@GetMapping`

  ```js
  $.rest.get({url: '/rest', data: {name: '黄彪'}, success: function(result) {
      console.log(result);
  }});
  ```

* `创建数据` 使用 POST，前端调用 `$.rest.create()`，后端使用 `@PostMapping`

  ```js
  $.rest.create({url: '/rest', success: function(result) {
      console.log(result);
  }});
  ```

* `更新数据` 使用 PUT，前端调用 `$.rest.update()`，后端使用 `@PutMapping`

  ```js
  $.rest.update({url: '/rest', data: {name: 'Bob', age: 22}, success: function(result) {
      console.log(result);
  }});
  ```

* `删除数据` 使用 DELETE，前端调用 `$.rest.remove()`，后端使用 `@DeleteMapping`

  ```js
  $.rest.remove({url: '/rest', success: function(result) {
      console.log(result);
  }});
  ```

使用方法参考 <http://qtdebug.com/fe-rest/>

## 抛出异常

如果程序中需要手动抛出异常，统一使用 `com.xtuer.ApplicationException`，这是一个运行时异常，并且可以为其指定异常显示的页面。

